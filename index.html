<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Cosmin vs Dasha</title>
  <style>
    html, body {
      margin: 0;
      padding: 0;
      overflow: hidden;
      background: black;
      font-family: monospace;
    }

    #hud {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      background: #111;
      color: white;
      padding: 10px;
      font-size: 20px;
      border-bottom: 2px solid lime;
      z-index: 2;
      text-align: center;
    }

    #gameCanvas {
      display: block;
      background: black;
    }

    #loading {
      position: fixed;
      width: 100%;
      height: 100%;
      background: #000;
      color: lime;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      z-index: 3;
    }

    #progressBar {
      width: 80%;
      height: 20px;
      background: #222;
      border: 1px solid lime;
      margin-top: 10px;
    }

    #progressFill {
      height: 100%;
      background: lime;
      width: 0%;
    }
  </style>
</head>
<body>

<div id="hud">Cosmin Score on Dasha: 0</div>
<canvas id="gameCanvas" width="900" height="400"></canvas>

<div id="loading">
  <div>Loading...</div>
  <div id="progressBar"><div id="progressFill"></div></div>
</div>

<script>
  const canvas = document.getElementById('gameCanvas');
  const ctx = canvas.getContext('2d');
  const hud = document.getElementById('hud');
  const loadingScreen = document.getElementById('loading');
  const progressFill = document.getElementById('progressFill');

  let gameStarted = false;
  let score = 0;

  let cosmin = {
    x: 50,
    y: canvas.height / 2,
    width: 60,
    height: 20,
    dragging: false
  };

  let dashas = [];
  let particles = [];

  function drawCosmin() {
    ctx.fillStyle = 'lime';
    ctx.fillRect(cosmin.x, cosmin.y - cosmin.height / 2, cosmin.width, cosmin.height);
  }

  function drawDasha(d) {
    ctx.fillStyle = d.hit ? 'hotpink' : 'deeppink';
    ctx.fillRect(d.x, d.y - 10, 30, 20);
  }

  function drawParticles() {
    for (let p of particles) {
      ctx.fillStyle = 'red';
      ctx.fillText('â™¥', p.x, p.y);
    }
  }

  function updateParticles() {
    for (let p of particles) {
      p.x += (Math.random() - 0.5) * 4;
      p.y -= Math.random() * 2;
      p.life -= 1;
    }
    particles = particles.filter(p => p.life > 0);
  }

  function spawnDasha() {
    dashas.push({
      x: canvas.width + 30,
      y: Math.random() * (canvas.height - 40) + 20,
      hit: false
    });
  }

  function updateGame() {
    for (let d of dashas) {
      if (!d.hit) {
        d.x -= 6;
        if (d.x < cosmin.x + cosmin.width &&
            d.x + 30 > cosmin.x &&
            d.y > cosmin.y - cosmin.height / 2 &&
            d.y < cosmin.y + cosmin.height / 2) {
          d.hit = true;
          score++;
          hud.textContent = `Cosmin Score on Dasha: ${score}`;
          for (let i = 0; i < 10; i++) {
            particles.push({
              x: d.x,
              y: d.y,
              life: 30
            });
          }
        }
      } else {
        d.x -= (d.x - 10) * 0.05;
        d.y -= (d.y - 10) * 0.05;
        if (Math.abs(d.x - 10) < 2 && Math.abs(d.y - 10) < 2) {
          dashas.splice(dashas.indexOf(d), 1);
        }
      }
    }
    dashas = dashas.filter(d => d.x > -40 || d.hit);
  }

  function draw() {
    ctx.clearRect(0, 0, canvas.width, canvas.height);
    drawCosmin();
    for (let d of dashas) drawDasha(d);
    drawParticles();
  }

  function gameLoop() {
    if (!gameStarted) return;
    updateGame();
    updateParticles();
    draw();
    requestAnimationFrame(gameLoop);
  }

  function setupControls() {
    canvas.addEventListener('touchstart', e => {
      e.preventDefault();
      cosmin.dragging = true;
    });

    canvas.addEventListener('touchmove', e => {
      if (cosmin.dragging) {
        let touch = e.touches[0];
        const rect = canvas.getBoundingClientRect();
        let y = touch.clientY - rect.top;
        cosmin.y = Math.max(cosmin.height / 2, Math.min(canvas.height - cosmin.height / 2, y));
      }
    });

    canvas.addEventListener('touchend', () => cosmin.dragging = false);
  }

  function fakeLoading() {
    let progress = 0;
    const interval = setInterval(() => {
      progress += 1;
      progressFill.style.width = `${progress}%`;
      if (progress >= 100) {
        clearInterval(interval);
        startGame();
      }
    }, 20);
  }

  function startGame() {
    loadingScreen.style.display = 'none';
    setTimeout(() => {
      hud.textContent = "Ready...";
      setTimeout(() => {
        hud.textContent = "Steady...";
        setTimeout(() => {
          hud.textContent = "Cosmin Score on Dasha: 0";
          gameStarted = true;
          setInterval(spawnDasha, 800);
          requestAnimationFrame(gameLoop);
        }, 1000);
      }, 1000);
    }, 500);
  }

  setupControls();
  fakeLoading();
</script>

</body>
</html>